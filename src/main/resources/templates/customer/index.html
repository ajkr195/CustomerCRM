<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>Simple CRM - Customer Management made Simple</title>
<link rel="stylesheet" th:href="@{/webjars/bootstrap/css/bootstrap.css}" />
<link rel="stylesheet"
	th:href="@{/webjars/datatables/css/dataTables.bootstrap4.min.css}" />
</head>
<body>
	<nav class="navbar navbar-dark bg-dark fixed-top">
		<div class="container">
			<div class="navbar-header">
				<a class="navbar-brand" href="/">Simple CRM</a>
			</div>
		</div>
	</nav>
	<div class="container" style="margin-top: 80px">

		<h1 class="pb-2 border-bottom row">
			<span class="col-sm-6 pb-4">Customer List</span> <span
				class="col-sm-6 text-sm-right pb-4"> <a
				href="/customer/create" class="btn btn-sm btn-outline-primary">Create
					Customer</a>
			</span>
		</h1>


		<div class="alert alert-info" th:if="${message}">
			<h3 th:text="${message}"></h3>
		</div>

		<table id="customerTable" class="table table-sm table-striped"
			style="width: 100%">
			<thead>
				<tr>
					<th>Id</th>
					<th>First Name</th>
					<th>Last Name</th>
					<th>Email</th>
					<th>City</th>
					<th>Country</th>
					<th>Phone</th>
				</tr>
			</thead>
		</table>

	</div>
	<br />
	<br />
	<footer class="footer navbar-dark bg-dark fixed-bottom">
		<div class="container">
			<div class="row">
				<div class="col-md-4"></div>
				<div class="col-md-4">
					<p class="text-center text-muted">
						&copy; <span
							th:text="${#dates.format(#dates.createNow(), 'yyyy')}"></span> <a
							href="https://github.com/ajkr195?tab=repositories">Spring
							Boot Rocks.</a>
					</p>
				</div>
			</div>
		</div>
	</footer>
	<script th:src="@{/webjars/jquery/jquery.min.js}"></script>
	<script
		th:src="@{/webjars/datatables/1.10.21/js/jquery.dataTables.min.js}"></script>
	<script th:src="@{/webjars/bootstrap/js/bootstrap.bundle.min.js}"></script>
	<script type="text/javascript"
		th:src="@{/webjars/datatables/1.10.21/js/dataTables.bootstrap4.min.js}"></script>
	<script>
  var url = '/customer/data_for_datatable';

  $(document).ready(function () {

    $('#customerTable').DataTable({
      "ajax": url,
      "processing": true,
      "serverSide": true,
      "columns": [
        {
          "data": "id",
          "render": function (data, type, row, meta) {
            return '<a href="/customer/edit/' + row.id + '">' + data + '</a>';
          }
        },
        {
          "data": "firstName",
          "render": function (data, type, row, meta) {
            return '<a href="/customer/edit/' + row.id + '">' + data + '</a>';
          }
        },
        {
          "data": "lastName",
          "render": function (data, type, row, meta) {
            return '<a href="/customer/edit/' + row.id + '">' + data + '</a>';
          }
        },
        {"data": "emailAddress"},
        {"data": "city"},
        {"data": "country"},
        {"data": "phoneNumber"}
      ]
    });
  });
</script>
</body>
</html>